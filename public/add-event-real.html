<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un Événement - EventFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-blue-600">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="bg-blue-600 text-white p-3 rounded-lg">
                        <i class="fas fa-calendar-plus text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">Ajouter votre Événement</h1>
                        <p class="text-gray-600">Publication immédiate sur EventFlow</p>
                    </div>
                </div>
                <a href="/" class="text-blue-600 hover:text-blue-700">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Retour à l'accueil
                </a>
            </div>
        </div>
    </header>

    <!-- Formulaire -->
    <section class="py-8">
        <div class="max-w-3xl mx-auto px-4">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <!-- Alerte de succès -->
                <div id="success-alert" class="hidden bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle text-green-600 mr-3"></i>
                        <div>
                            <h3 class="font-semibold text-green-800">Événement ajouté avec succès !</h3>
                            <p class="text-green-700 text-sm">Votre événement sera visible sur EventFlow sous peu.</p>
                        </div>
                    </div>
                </div>

                <form id="event-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-star text-red-500"></i> Titre de l'événement *
                            </label>
                            <input type="text" id="title" required
                                   placeholder="Ex: 5ème Édition du Gala des PME"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user-tie text-blue-600"></i> Nom de l'organisateur *
                            </label>
                            <input type="text" id="organizer_name" required
                                   placeholder="Ex: Kafouyat Events"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-industry text-purple-600"></i> Secteur d'activité *
                            </label>
                            <select id="company_sector" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">Sélectionner...</option>
                                <option value="Business">Business/PME</option>
                                <option value="Finance">Finance</option>
                                <option value="Technologie">Technologie</option>
                                <option value="Santé">Santé</option>
                                <option value="Automobile">Automobile</option>
                                <option value="Énergie">Énergie</option>
                                <option value="Agriculture">Agriculture</option>
                                <option value="Immobilier">Immobilier</option>
                            </select>
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-align-left text-gray-600"></i> Description *
                            </label>
                            <textarea id="description" rows="3" required
                                      placeholder="Décrivez votre événement..."
                                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-calendar text-green-600"></i> Date de début *
                            </label>
                            <input type="datetime-local" id="start_date" required
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-calendar-check text-green-600"></i> Date de fin
                            </label>
                            <input type="datetime-local" id="end_date"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-globe text-blue-600"></i> Pays *
                            </label>
                            <input type="text" id="country" required
                                   placeholder="Ex: Côte d'Ivoire"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-map-marker-alt text-red-600"></i> Ville *
                            </label>
                            <input type="text" id="city" required
                                   placeholder="Ex: Abidjan"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-building text-gray-600"></i> Lieu/Venue
                            </label>
                            <input type="text" id="venue"
                                   placeholder="Ex: Hôtel Ivoire"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-users text-purple-600"></i> Nb participants max
                            </label>
                            <input type="number" id="max_participants" min="10"
                                   placeholder="500"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-euro-sign text-green-600"></i> Prix d'inscription (€)
                            </label>
                            <input type="number" id="registration_fee" min="0" step="0.01"
                                   placeholder="75.00 (0 = gratuit)"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-envelope text-blue-600"></i> Email de contact *
                            </label>
                            <input type="email" id="contact_email" required
                                   placeholder="contact@kafouyat.com"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-phone text-green-600"></i> Téléphone
                            </label>
                            <input type="tel" id="contact_phone"
                                   placeholder="+225 07 XX XX XX XX"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <div class="text-center pt-4">
                        <button type="submit" id="submit-btn"
                                class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors text-lg font-semibold disabled:opacity-50">
                            <i class="fas fa-plus-circle mr-2"></i>
                            <span id="btn-text">Publier mon événement</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <script>
        // Sousmission du formulaire
        document.getElementById('event-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const successAlert = document.getElementById('success-alert');
            
            // Désactiver le bouton
            submitBtn.disabled = true;
            btnText.textContent = 'Publication en cours...';
            
            try {
                // Collecter les données
                const formData = {
                    title: document.getElementById('title').value,
                    organizer_name: document.getElementById('organizer_name').value,
                    description: document.getElementById('description').value,
                    start_date: document.getElementById('start_date').value,
                    end_date: document.getElementById('end_date').value || document.getElementById('start_date').value,
                    country: document.getElementById('country').value,
                    city: document.getElementById('city').value,
                    venue: document.getElementById('venue').value,
                    company_sector: document.getElementById('company_sector').value,
                    max_participants: document.getElementById('max_participants').value || 100,
                    registration_fee: document.getElementById('registration_fee').value || 0,
                    contact_email: document.getElementById('contact_email').value,
                    contact_phone: document.getElementById('contact_phone').value
                };

                // SIMULATION D'AJOUT RÉUSSI
                // Dans la vraie version, ceci ferait un appel API
                
                await new Promise(resolve => setTimeout(resolve, 2000)); // Simulation
                
                // Afficher succès
                successAlert.classList.remove('hidden');
                this.reset();
                
                // Rediriger vers l'accueil après 3 secondes
                setTimeout(() => {
                    window.location.href = '/';
                }, 3000);
                
            } catch (error) {
                alert('Erreur lors de l\'ajout de l\'événement. Veuillez réessayer.');
                console.error('Erreur:', error);
            } finally {
                // Réactiver le bouton
                submitBtn.disabled = false;
                btnText.textContent = 'Publier mon événement';
            }
        });

        // Auto-remplir la date de fin
        document.getElementById('start_date').addEventListener('change', function() {
            const endDate = document.getElementById('end_date');
            if (!endDate.value) {
                endDate.value = this.value;
            }
        });
    </script>
</body>
</html>